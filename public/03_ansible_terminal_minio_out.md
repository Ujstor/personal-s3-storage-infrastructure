```bash
ujstor  …/personal-s3-storage-infrastructure/ansible   master !?  23:06  ansible-playbook playbooks/playbook_minio.yml
[WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

PLAY [Cluster config | ssl, dns, rename drives] ********************************************************************************************************************************************************

TASK [Gathering Facts] *********************************************************************************************************************************************************************************
ok: [128.140.0.112]
ok: [91.107.208.20]
ok: [49.13.73.3]
ok: [135.181.88.205]

TASK [Check if cert directory exists] ******************************************************************************************************************************************************************
ok: [49.13.73.3]
ok: [128.140.0.112]
ok: [91.107.208.20]
ok: [135.181.88.205]

TASK [Create cert directory] ***************************************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [91.107.208.20]
changed: [49.13.73.3]
changed: [135.181.88.205]

TASK [Copy openssl crt] ********************************************************************************************************************************************************************************
changed: [49.13.73.3]
changed: [128.140.0.112]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [Copy openssl crt to CAs] *************************************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [Copy openssl key] ********************************************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [Configure DNS mappings] **************************************************************************************************************************************************************************
changed: [128.140.0.112] => (item={'hostname': 'minio1.ujstor.com', 'ip_address': '10.0.3.2'})
changed: [49.13.73.3] => (item={'hostname': 'minio1.ujstor.com', 'ip_address': '10.0.3.2'})
changed: [91.107.208.20] => (item={'hostname': 'minio1.ujstor.com', 'ip_address': '10.0.3.2'})
changed: [135.181.88.205] => (item={'hostname': 'minio1.ujstor.com', 'ip_address': '10.0.3.2'})
changed: [128.140.0.112] => (item={'hostname': 'minio2.ujstor.com', 'ip_address': '10.0.3.3'})
changed: [49.13.73.3] => (item={'hostname': 'minio2.ujstor.com', 'ip_address': '10.0.3.3'})
changed: [91.107.208.20] => (item={'hostname': 'minio2.ujstor.com', 'ip_address': '10.0.3.3'})
changed: [128.140.0.112] => (item={'hostname': 'minio3.ujstor.com', 'ip_address': '10.0.3.4'})
changed: [135.181.88.205] => (item={'hostname': 'minio2.ujstor.com', 'ip_address': '10.0.3.3'})
changed: [49.13.73.3] => (item={'hostname': 'minio3.ujstor.com', 'ip_address': '10.0.3.4'})
changed: [91.107.208.20] => (item={'hostname': 'minio3.ujstor.com', 'ip_address': '10.0.3.4'})
changed: [128.140.0.112] => (item={'hostname': 'minio4.ujstor.com', 'ip_address': '10.0.3.5'})
changed: [49.13.73.3] => (item={'hostname': 'minio4.ujstor.com', 'ip_address': '10.0.3.5'})
changed: [91.107.208.20] => (item={'hostname': 'minio4.ujstor.com', 'ip_address': '10.0.3.5'})
changed: [135.181.88.205] => (item={'hostname': 'minio3.ujstor.com', 'ip_address': '10.0.3.4'})
changed: [135.181.88.205] => (item={'hostname': 'minio4.ujstor.com', 'ip_address': '10.0.3.5'})

TASK [Copy mount volume rename script] *****************************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [Execute the script] ******************************************************************************************************************************************************************************
changed: [49.13.73.3]
changed: [128.140.0.112]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [Reboot server] ***********************************************************************************************************************************************************************************
fatal: [128.140.0.112]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 128.140.0.112 closed.", "unreachable": true}
...ignoring
fatal: [49.13.73.3]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 49.13.73.3 closed.", "unreachable": true}
...ignoring
fatal: [91.107.208.20]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 91.107.208.20 closed.", "unreachable": true}
...ignoring
fatal: [135.181.88.205]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 135.181.88.205 closed.", "unreachable": true}
...ignoring

TASK [Wait for servers to come back online] ************************************************************************************************************************************************************
ok: [91.107.208.20]
ok: [128.140.0.112]
ok: [49.13.73.3]
ok: [135.181.88.205]

PLAY [Install minIO] ***********************************************************************************************************************************************************************************

TASK [Gathering Facts] *********************************************************************************************************************************************************************************
ok: [49.13.73.3]
ok: [128.140.0.112]
ok: [91.107.208.20]
ok: [135.181.88.205]

TASK [common : Update package lists] *******************************************************************************************************************************************************************
changed: [135.181.88.205]
changed: [49.13.73.3]
changed: [128.140.0.112]
changed: [91.107.208.20]

TASK [common : Upgrade all packages] *******************************************************************************************************************************************************************
changed: [135.181.88.205]
changed: [49.13.73.3]
changed: [128.140.0.112]
changed: [91.107.208.20]

TASK [common : Install public AuthorizedKeysFile] ******************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [common : Install required packages] **************************************************************************************************************************************************************
changed: [135.181.88.205]
changed: [49.13.73.3]
changed: [128.140.0.112]
changed: [91.107.208.20]

TASK [common : Allow everything and enable UFW] ********************************************************************************************************************************************************
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]
changed: [128.140.0.112]

TASK [common : Allow incoming traffic on specified ports] **********************************************************************************************************************************************
changed: [49.13.73.3] => (item=22)
changed: [91.107.208.20] => (item=22)
changed: [128.140.0.112] => (item=22)
changed: [135.181.88.205] => (item=22)

TASK [common : Configure Fail2Ban] *********************************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [common : Restart fail2ban] ***********************************************************************************************************************************************************************
changed: [49.13.73.3]
changed: [135.181.88.205]
changed: [128.140.0.112]
changed: [91.107.208.20]

TASK [common : SSH Hardening for root user] ************************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [common : Restart sshd] ***************************************************************************************************************************************************************************
changed: [49.13.73.3]
changed: [128.140.0.112]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [minio : Install server] **************************************************************************************************************************************************************************
included: /home/ujstor/code/ujstor/personal-s3-storage-infrastructure/ansible/playbooks/roles/minio/tasks/install_server.yml for 49.13.73.3, 128.140.0.112, 135.181.88.205, 91.107.208.20

TASK [minio : Compose the Minio server download url] ***************************************************************************************************************************************************
ok: [49.13.73.3]
ok: [128.140.0.112]
ok: [135.181.88.205]
ok: [91.107.208.20]

TASK [minio : Get the Minio server checksum for architecture amd64] ************************************************************************************************************************************
ok: [135.181.88.205]
ok: [91.107.208.20]
ok: [49.13.73.3]
ok: [128.140.0.112]

TASK [minio : Create Minio group] **********************************************************************************************************************************************************************
changed: [49.13.73.3]
changed: [128.140.0.112]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [minio : Create Minio user] ***********************************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [minio : Create the Minio config directories] *****************************************************************************************************************************************************
changed: [128.140.0.112] => (item=/etc/minio)
changed: [49.13.73.3] => (item=/etc/minio)
changed: [91.107.208.20] => (item=/etc/minio)
changed: [135.181.88.205] => (item=/etc/minio)
changed: [128.140.0.112] => (item=/etc/minio/ssl)
changed: [49.13.73.3] => (item=/etc/minio/ssl)
changed: [91.107.208.20] => (item=/etc/minio/ssl)
changed: [135.181.88.205] => (item=/etc/minio/ssl)
changed: [128.140.0.112] => (item=/etc/minio/policy)
changed: [49.13.73.3] => (item=/etc/minio/policy)
changed: [91.107.208.20] => (item=/etc/minio/policy)
changed: [135.181.88.205] => (item=/etc/minio/policy)

TASK [minio : Create the Minio data storage directories] ***********************************************************************************************************************************************
changed: [49.13.73.3] => (item=/var/lib/minio)
changed: [128.140.0.112] => (item=/var/lib/minio)
changed: [91.107.208.20] => (item=/var/lib/minio)
changed: [135.181.88.205] => (item=/var/lib/minio)

TASK [minio : Download the Minio server] ***************************************************************************************************************************************************************
changed: [49.13.73.3]
changed: [135.181.88.205]
changed: [128.140.0.112]
changed: [91.107.208.20]

TASK [minio : Generate the Minio server envfile] *******************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [minio : Create the Minio server systemd config] **************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [minio : Copy SSL private key file] ***************************************************************************************************************************************************************
skipping: [49.13.73.3]
skipping: [128.140.0.112]
skipping: [135.181.88.205]
skipping: [91.107.208.20]

TASK [minio : Copy cert file] **************************************************************************************************************************************************************************
skipping: [49.13.73.3]
skipping: [128.140.0.112]
skipping: [135.181.88.205]
skipping: [91.107.208.20]

TASK [minio : Flush handlers] **************************************************************************************************************************************************************************

TASK [minio : Flush handlers] **************************************************************************************************************************************************************************

TASK [minio : Flush handlers] **************************************************************************************************************************************************************************

TASK [minio : Flush handlers] **************************************************************************************************************************************************************************

RUNNING HANDLER [minio : Reload minio systemd] *********************************************************************************************************************************************************
ok: [128.140.0.112]
ok: [91.107.208.20]
ok: [49.13.73.3]
ok: [135.181.88.205]

RUNNING HANDLER [minio : Restart minio] ****************************************************************************************************************************************************************
changed: [49.13.73.3]
changed: [128.140.0.112]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [minio : Ensure minio is started at boot] *********************************************************************************************************************************************************
changed: [49.13.73.3]
changed: [128.140.0.112]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [minio : Set secure minio url if not defined] *****************************************************************************************************************************************************
skipping: [49.13.73.3]
skipping: [128.140.0.112]
skipping: [135.181.88.205]
skipping: [91.107.208.20]

TASK [minio : Set unsecure minio_url if not defined] ***************************************************************************************************************************************************
ok: [49.13.73.3]
ok: [128.140.0.112]
ok: [135.181.88.205]
ok: [91.107.208.20]

TASK [minio : Install client] **************************************************************************************************************************************************************************
included: /home/ujstor/code/ujstor/personal-s3-storage-infrastructure/ansible/playbooks/roles/minio/tasks/install_client.yml for 49.13.73.3, 128.140.0.112, 135.181.88.205, 91.107.208.20

TASK [minio : Compose the Minio client download base url] **********************************************************************************************************************************************
ok: [49.13.73.3]
ok: [128.140.0.112]
ok: [135.181.88.205]
ok: [91.107.208.20]

TASK [minio : Get the Minio client checksum for architecture amd64] ************************************************************************************************************************************
ok: [49.13.73.3]
ok: [128.140.0.112]
ok: [135.181.88.205]
ok: [91.107.208.20]

TASK [minio : Download the Minio client] ***************************************************************************************************************************************************************
changed: [128.140.0.112]
changed: [49.13.73.3]
changed: [91.107.208.20]
changed: [135.181.88.205]

TASK [minio : Configure server] ************************************************************************************************************************************************************************
included: /home/ujstor/code/ujstor/personal-s3-storage-infrastructure/ansible/playbooks/roles/minio/tasks/configure_server.yml for 49.13.73.3

TASK [minio : Set insecure mc command] *****************************************************************************************************************************************************************
skipping: [49.13.73.3]

TASK [minio : Set secure mc command] *******************************************************************************************************************************************************************
ok: [49.13.73.3]

TASK [minio : Create Minio Users] **********************************************************************************************************************************************************************
skipping: [49.13.73.3]

TASK [minio : Create Minio Buckets] ********************************************************************************************************************************************************************
included: /home/ujstor/code/ujstor/personal-s3-storage-infrastructure/ansible/playbooks/roles/minio/tasks/create_minio_buckets.yml for 49.13.73.3

TASK [minio : Ensure PIP is installed.] ****************************************************************************************************************************************************************
changed: [49.13.73.3]

TASK [minio : Install pip packages] ********************************************************************************************************************************************************************
changed: [49.13.73.3]

TASK [minio : Create Buckets] **************************************************************************************************************************************************************************
skipping: [49.13.73.3]

TASK [minio : Create Prometheus bearer token] **********************************************************************************************************************************************************
skipping: [49.13.73.3]

TASK [Allow http, UI and S3 API ports] *****************************************************************************************************************************************************************
changed: [49.13.73.3] => (item=9091)
changed: [91.107.208.20] => (item=9091)
changed: [128.140.0.112] => (item=9091)
changed: [135.181.88.205] => (item=9091)
changed: [49.13.73.3] => (item=9092)
changed: [128.140.0.112] => (item=9092)
changed: [91.107.208.20] => (item=9092)
changed: [135.181.88.205] => (item=9092)

TASK [Reboot server1] **********************************************************************************************************************************************************************************
fatal: [49.13.73.3]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 49.13.73.3 closed.", "unreachable": true}
...ignoring
fatal: [128.140.0.112]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 128.140.0.112 closed.", "unreachable": true}
...ignoring
fatal: [91.107.208.20]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 91.107.208.20 closed.", "unreachable": true}
...ignoring
fatal: [135.181.88.205]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 135.181.88.205 closed.", "unreachable": true}
...ignoring

TASK [Wait for servers to come back online1] ***********************************************************************************************************************************************************
ok: [135.181.88.205]
ok: [128.140.0.112]
ok: [49.13.73.3]
ok: [91.107.208.20]

TASK [Change ownership for /mnt/disk] ******************************************************************************************************************************************************************
changed: [128.140.0.112] => (item=/mnt/disk1)
changed: [49.13.73.3] => (item=/mnt/disk1)
changed: [91.107.208.20] => (item=/mnt/disk1)
changed: [135.181.88.205] => (item=/mnt/disk1)
changed: [128.140.0.112] => (item=/mnt/disk2)
changed: [49.13.73.3] => (item=/mnt/disk2)
changed: [91.107.208.20] => (item=/mnt/disk2)
changed: [135.181.88.205] => (item=/mnt/disk2)
changed: [128.140.0.112] => (item=/mnt/disk3)
changed: [49.13.73.3] => (item=/mnt/disk3)
changed: [91.107.208.20] => (item=/mnt/disk3)
changed: [128.140.0.112] => (item=/mnt/disk4)
changed: [49.13.73.3] => (item=/mnt/disk4)
changed: [91.107.208.20] => (item=/mnt/disk4)
changed: [135.181.88.205] => (item=/mnt/disk3)
changed: [135.181.88.205] => (item=/mnt/disk4)

TASK [Reboot server2] **********************************************************************************************************************************************************************************
fatal: [128.140.0.112]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 128.140.0.112 closed.", "unreachable": true}
...ignoring
fatal: [49.13.73.3]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 49.13.73.3 closed.", "unreachable": true}
...ignoring
fatal: [91.107.208.20]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 91.107.208.20 closed.", "unreachable": true}
...ignoring
fatal: [135.181.88.205]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 135.181.88.205 closed.", "unreachable": true}
...ignoring

TASK [Wait for servers to come back online2] ***********************************************************************************************************************************************************
ok: [128.140.0.112]
ok: [49.13.73.3]
ok: [91.107.208.20]
ok: [135.181.88.205]

PLAY RECAP *********************************************************************************************************************************************************************************************
128.140.0.112              : ok=46   changed=29   unreachable=0    failed=0    skipped=3    rescued=0    ignored=3   
135.181.88.205             : ok=46   changed=29   unreachable=0    failed=0    skipped=3    rescued=0    ignored=3   
49.13.73.3                 : ok=51   changed=31   unreachable=0    failed=0    skipped=7    rescued=0    ignored=3   
91.107.208.20              : ok=46   changed=29   unreachable=0    failed=0    skipped=3    rescued=0    ignored=3   

```